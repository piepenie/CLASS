1)각 테이블을 생성합니다.

create table tbl_member(
member_id int not null,
member_name varchar(10) not null,
member_identity varchar(10) null,
member_grade char(2) not null,
member_addr varchar(100) not null,
member_phone varchar(20) null);

create table tbl_book(
book_code int not null,
classification_Id int not null,
book_author varchar(45) null,
book_name varchar(45) null, 
publisher varchar(45) null,
isrental char(1) not null);

create table tbl_rental(
rental_id int not null,
book_code int not null,
member_id int not null);

2) tbl_member 의 member_id 에 primary key 제약 조건 설정(alter 사용)
-PK 는 auto_increment 설정을 합니다
alter table tbl_member change column member_id member_id int primary key auto_increment;

/* alter table tbl_member drop primary key;
alter table tbl_member add constraint PK_tbl_member primary key(member_id) auto_increment; */
이 부분 다시.

3) tbl_book의 book_code 에 primary key 제약 조건 설정(alter 사용)
-PK 는 auto_increment 설정을 합니다
alter table tbl_book change column book_code book_code int primary key auto_increment;


4) tbl_rental의 rental_id 에 primary key 제약 조건 설정(alter 사용)
-PK 는 auto_increment 설정을 합니다
alter table tbl_rental change column rental_id rental_id int primary key auto_increment;

5) tbl_rental의 book_code 에 tbl_book의 book_code(PK)를 참조하는 FK를 설정하세요.(alter 사용)
-Update 시 Restrict 옵션 적용
-Delete 시 cascade 옵션 적용
alter table tbl_rental add constraint FK_tbl_rental foreign key(book_code)
references tbl_book(book_code)
on update restrict 
on delete cascade; 

----------------------------------------------------------

create table tbl_member(
member_id int not null,
member_name varchar(10) not null,
member_identity varchar(10) null,
member_grade char(2) not null,
member_addr varchar(100) not null,
member_phone varchar(20) null);
show tables;
desc tbl_member;

create table tbl_book(
book_code int not null,
classification_Id int not null,
book_author varchar(45) null,
book_name varchar(45) null, 
publisher varchar(45) null,
isrental char(1) not null);
desc tbl_book;

create table tbl_rental(
rental_id int not null,
book_code int not null,
member_id int not null);
desc tbl_rental;

alter table tbl_member modify column member_id int auto_increment primary key;
alter table tbl_book modify column book_code int auto_increment primary key;
alter table tbl_rental modify column rental_id int auto_increment primary key;

alter table tbl_rental add constraint FK_tbl_rental foreign key(book_code)
references tbl_book(book_code)
on update restrict 
on delete cascade;

alter table tbl_rental add constraint FK_tbl_rental_id foreign key(member_id)
references tbl_member(member_id)
on update cascade 
on delete cascade; 

insert into tbl_member (member_id,member_name,member_identity,member_grade,member_addr,member_phone)
value(111,'aaa','111','일반','대구','010-111-2222');
alter table tbl_member modify column member_grade varchar(10);
insert into tbl_member (member_id,member_name,member_identity,member_grade,member_addr,member_phone)
value(222,'bbb','222','VIP','울산','010-111-2222');
insert into tbl_member (member_id,member_name,member_identity,member_grade,member_addr,member_phone)
value(333,'ccc','333','VIP','인천','010-111-2222');
insert into tbl_member (member_id,member_name,member_identity,member_grade,member_addr,member_phone)
value(444,'ddd','444','일반','부산','010-111-2222');
insert into tbl_member (member_id,member_name,member_identity,member_grade,member_addr,member_phone)
value(555,'eee','555','VIP','서울','010-111-2222');
insert into tbl_member (member_id,member_name,member_identity,member_grade,member_addr,member_phone)
value(666,'fff','666','일반','경기','010-111-2222');

insert into tbl_book(book_code,classification_Id,book_author,book_name,publisher,isrental)
value(1010,1,'윤성우','열혈C','오렌지미디어','1');
insert into tbl_book(book_code,classification_Id,book_author,book_name,publisher,isrental)
value(1011,1,'남궁성','JAVA의정석','00미디어','1');
insert into tbl_book(book_code,classification_Id,book_author,book_name,publisher,isrental)
value(1012,1,'남길동','이것이리눅스다','한빛미디어','1');

insert into tbl_rental(rental_id,book_code,member_id)
value(1,1010,111);
insert into tbl_rental(rental_id,book_code,member_id)
value(2,1011,222);
insert into tbl_rental(rental_id,book_code,member_id)
value(3,1012,333);

select * from information_schema.table_constraints
where table_name = 'tbl_member';
select * from information_schema.table_constraints
where table_name = 'tbl_book';
select * from information_schema.table_constraints
where table_name = 'tbl_rental';
